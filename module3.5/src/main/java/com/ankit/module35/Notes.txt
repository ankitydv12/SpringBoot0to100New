Commit-->3.5.2 Projection On Aggregate Query



                             * Projection On Aggregate Query *
1.Define a java Class  which contain the field which we want to get from the database
@Data
public class BloodGroupCount {
    private final BloodGroupType bloodGroupType;
    private  final  Long Count;
}
2. Used the class in repository:
    //Aggregate Query
    @Query("select  new com.ankit.module35.dto.BloodGroupCount(p.bloodGroup, count(p)) from Patient p group by p.bloodGroup order by count(p) DESC ")
    List<BloodGroupCount>  getBloodGroupCount();

3.call the getBloodGroupCount()


                        * Update the Query *
1. Define this in the Repository
    Note: ':' is used in the query to giving the parameter
 @Modifying //tells jpa repository that this is going to modify the database
    @Transactional // make sure that transaction is fully completed or fully fail
    @Query("UPDATE Patient p set p.name = :name where p.id = :id ")
    int updatePatientNameWithId(@Param("name") String name,@Param("id")Long id);